import { observer } from 'mobx-react';
import * as React from 'react';
import { OpenAPIInfo } from '../../types';
import { LinkWrap, LogoImgEl, LogoWrap } from './styled.elements';

const Xlogo = ({ logoInfo, info }) => {
  const logoHref = logoInfo.href || (info.contact && info.contact.url);

  // Use the english word logo if no alt text is provided
  const altText = logoInfo.altText ? logoInfo.altText : 'logo';

  const logo = <LogoImgEl src={logoInfo.url} alt={altText} />;
  return (
    <LogoWrap style={{ backgroundColor: logoInfo.backgroundColor }}>
      {logoHref ? LinkWrap(logoHref)(logo) : logo}
    </LogoWrap>
  );
};

@observer
export class ApiLogo extends React.Component<{ info: OpenAPIInfo }> {
  render() {
    const { info } = this.props;
    const logoInfo = info['x-logo'];
    const hasXLogo = logoInfo && logoInfo.url;

    return hasXLogo ? (
      <Xlogo logoInfo={logoInfo} info={info} />
    ) : (
      <div style={{ height: 28, margin: '40px 16px' }} className="svg-logo">
        <svg width={129} height={27} fill="none">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.343 1.797c0 .992.758 1.797 1.692 1.797.934 0 1.692-.805 1.692-1.797C11.728.805 10.97 0 10.035 0 9.1 0 8.343.805 8.343 1.797zM0 6.914C0 7.906.758 8.71 1.692 8.71c.934 0 1.692-.805 1.692-1.797 0-.992-.758-1.797-1.692-1.797C.758 5.117 0 5.922 0 6.914zm0 10.232c0 .992.758 1.797 1.692 1.797.934 0 1.692-.805 1.692-1.797 0-.992-.758-1.797-1.692-1.797-.934 0-1.692.805-1.692 1.797zm8.343 5.117c0 .992.758 1.797 1.692 1.797.934 0 1.692-.805 1.692-1.797 0-.993-.758-1.797-1.692-1.797-.934 0-1.692.804-1.692 1.797zm8.343-5.116c0 .993.758 1.798 1.692 1.798.934 0 1.692-.805 1.692-1.798 0-.992-.758-1.797-1.692-1.797-.934 0-1.692.805-1.692 1.797zm0-10.233c0 .992.758 1.797 1.692 1.797.934 0 1.692-.805 1.692-1.797 0-.992-.758-1.797-1.692-1.797-.934 0-1.692.805-1.692 1.797zM8.343 12.03c0 .993.758 1.798 1.692 1.798.934 0 1.692-.805 1.692-1.797 0-.992-.758-1.797-1.692-1.797-.934-.002-1.692.803-1.692 1.797z"
            fill="#000"
          />
          <path
            d="M32.968 20.72H45.64v-2.112H35.272v-5.856h8.28v-1.8h-8.28V5.288h10.32V3.2H32.968v17.52zm15.513 0h2.328v-6.456c0-3.456 1.656-5.304 4.056-5.304 2.64 0 3.576 1.752 3.576 4.248v7.512h2.304v-8.04c0-3.336-1.656-5.664-4.968-5.664-2.352 0-4.104 1.272-4.992 3.72V7.28h-2.304v13.44zm21.147.072c2.184 0 4.032-1.152 4.992-3.216v1.752c0 3.6-1.68 5.088-4.392 5.088-2.016 0-3.264-.768-4.2-2.208l-2.088 1.248c1.272 1.92 3.264 3 6.144 3 4.224 0 6.84-2.304 6.84-7.224V7.28H74.62v2.952c-.84-2.016-2.472-3.168-4.824-3.168-3.192 0-6.168 2.4-6.168 6.936s2.808 6.792 6 6.792zm.792-1.944c-2.64 0-4.416-1.728-4.416-4.872 0-3.072 1.728-4.992 4.368-4.992 3.024 0 4.416 2.16 4.416 4.992 0 2.712-1.416 4.872-4.368 4.872zm9.88-15.24c0 .936.577 1.584 1.609 1.584 1.008 0 1.608-.648 1.608-1.584S82.917 2 81.909 2c-1.032 0-1.608.672-1.608 1.608zm2.737 3.672h-2.328v13.44h2.328V7.28zm3.811 13.44h2.328v-6.456c0-3.456 1.656-5.304 4.056-5.304 2.64 0 3.576 1.752 3.576 4.248v7.512h2.304v-8.04c0-3.336-1.656-5.664-4.968-5.664-2.352 0-4.104 1.272-4.992 3.72V7.28h-2.304v13.44zm27.964-2.88l-1.944-1.104c-.792 1.368-1.968 2.28-4.008 2.28-2.88 0-4.416-1.728-4.608-4.416H115.1v-.72c0-3.816-2.088-6.864-6.288-6.864-4.272 0-6.816 3.24-6.816 7.08 0 3.864 2.28 6.864 6.888 6.864 3.048 0 4.872-1.44 5.928-3.12zm-6-8.904c2.592 0 3.864 1.728 4.008 4.176h-8.52c.288-2.52 1.872-4.176 4.512-4.176zm8.124 9.288c1.272 1.704 3.288 2.76 6.408 2.76 3.408 0 5.28-1.92 5.28-4.176 0-2.568-2.208-3.24-5.16-3.672-2.616-.384-3.936-.744-3.936-2.088 0-1.152.888-2.112 3.024-2.112 1.992 0 3.36.768 4.44 2.424l1.8-1.512c-1.464-1.944-3.36-2.88-6.144-2.88-3.216 0-5.208 1.728-5.208 4.08 0 2.232 1.56 3.12 4.416 3.552 2.76.408 4.632.672 4.632 2.208 0 1.104-.888 2.232-3.096 2.232-2.184 0-3.648-.84-4.728-2.376l-1.728 1.56z"
            fill="#000"
          />
        </svg>
      </div>
    );
  }
}
